<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ayiti of Deeds</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: 'Inter', sans-serif;
    }
    .fade-in {
      animation: fadeIn 1s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body class="flex flex-col items-center justify-start min-h-screen py-10 px-4 fade-in">
  <!-- HEADER -->
  <header class="text-center mb-10">
    <svg width="300" height="120" viewBox="0 0 300 120" xmlns="http://www.w3.org/2000/svg" class="mx-auto mb-4">
      <path d="M0,80 Q70,20 140,80 T300,80" fill="none" stroke="#ff6600" stroke-width="5"/>
      <text x="50" y="75" fill="white" font-size="10" font-weight="bold">
        DEEDS DEEDS DEEDS DEEDS DEEDS DEEDS DEEDS DEEDS DEEDS DEEDS
      </text>
    </svg>
    <h1 class="text-4xl font-extrabold tracking-wide">AYITI OF DEEDS</h1>
    <p class="text-sm text-gray-300 mt-1">Sow a SEED. Do the DEED. Build Sovereignty.</p>
  </header>

  <!-- SUBMISSION FORM -->
  <form id="deedForm" class="bg-gray-900 border border-gray-700 rounded-lg px-6 pt-4 pb-6 mb-8 w-full max-w-md shadow-md">
    <input id="name" type="text" placeholder="Your name" class="bg-black border border-gray-700 text-white rounded w-full py-2 px-3 mb-3 focus:outline-none focus:ring-1 focus:ring-orange-500" required />
    <input id="type" type="text" placeholder="Type of deed (e.g. cleanup, donation)" class="bg-black border border-gray-700 text-white rounded w-full py-2 px-3 mb-3 focus:outline-none focus:ring-1 focus:ring-orange-500" required />
    <input id="proof_url" type="text" placeholder="Proof URL (optional)" class="bg-black border border-gray-700 text-white rounded w-full py-2 px-3 mb-3 focus:outline-none focus:ring-1 focus:ring-orange-500" />
    <textarea id="description" placeholder="Describe what you did" class="bg-black border border-gray-700 text-white rounded w-full py-2 px-3 mb-3 focus:outline-none focus:ring-1 focus:ring-orange-500" required></textarea>
    <button type="submit" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 rounded">Submit Deed</button>
  </form>

  <!-- LEADERBOARD -->
  <div id="leaderboard" class="w-full max-w-md bg-gray-900 border border-gray-700 rounded-lg p-4 shadow-lg">
    <h2 class="text-xl font-semibold text-orange-400 mb-3 text-center">üèÜ Leaderboard</h2>
    <ul id="deedsList" class="text-gray-200 text-sm space-y-3"></ul>
  </div>

  <!-- FOOTER -->
  <footer class="mt-10 text-xs text-gray-500 text-center">
    <p>¬© 2025 Ayiti of Deeds | Built by Asia Grady</p>
  </footer>

  <!-- SCRIPT -->
  <script>
    const form = document.getElementById("deedForm");
    const list = document.getElementById("deedsList");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const deed = {
        name: document.getElementById("name").value,
        type: document.getElementById("type").value,
        proof_url: document.getElementById("proof_url").value,
        description: document.getElementById("description").value,
      };
      await fetch("/api/deed", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(deed),
      });
      form.reset();
      loadDeeds();
    });

    async function loadDeeds() {
      const res = await fetch("/api/deeds");
      const deeds = await res.json();
      list.innerHTML = "";
      deeds.reverse().forEach((d, i) => {
        const li = document.createElement("li");
        li.className = "border border-gray-700 rounded p-3 bg-gray-800 hover:bg-gray-700 transition";
        li.innerHTML = `
          <div class="text-orange-400 font-semibold">#${deeds.length - i} ${d.name}</div>
          <div>${d.type}</div>
          <div class="text-gray-400 text-xs mt-1">${d.description}</div>
        `;
        list.appendChild(li);
      });
    }
    loadDeeds();
  </script>
</body>
</html>