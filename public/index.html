<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Solar Roots Cooperative</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      color-scheme: light;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background-color: #0f172a;
      color: #ffffff;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header.hero {
      position: relative;
      flex: 1 0 auto;
      display: grid;
      align-items: center;
      padding: clamp(4rem, 8vw, 6rem) clamp(1.5rem, 6vw, 8rem);
      background: url('https://images.unsplash.com/photo-1526498460520-4c246339dccb?auto=format&fit=crop&w=2000&q=80') center/cover no-repeat;
      color: #ffffff;
      overflow: hidden;
    }

    header.hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(15, 23, 42, 0.88), rgba(5, 150, 105, 0.6));
      backdrop-filter: blur(2px);
    }

    .hero__content {
      position: relative;
      max-width: 38rem;
      display: grid;
      gap: 1.5rem;
    }

    .hero__eyebrow {
      text-transform: uppercase;
      letter-spacing: 0.24em;
      font-weight: 600;
      font-size: 0.85rem;
      color: rgba(209, 250, 229, 0.9);
    }

    .hero__headline {
      font-size: clamp(2.75rem, 5vw, 3.75rem);
      line-height: 1.08;
      font-weight: 700;
      margin: 0;
    }

    .hero__copy {
      font-size: clamp(1.05rem, 2.2vw, 1.25rem);
      line-height: 1.7;
      margin: 0;
      color: rgba(226, 232, 240, 0.92);
    }

    .hero__cta {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.85rem 1.75rem;
      border-radius: 999px;
      background: linear-gradient(135deg, #10b981, #059669);
      color: #ffffff;
      font-weight: 600;
      font-size: 1rem;
      transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
      box-shadow: 0 18px 30px -18px rgba(16, 185, 129, 0.7);
    }

    .hero__cta:hover,
    .hero__cta:focus-visible {
      transform: translateY(-2px);
      box-shadow: 0 22px 34px -18px rgba(16, 185, 129, 0.8);
      filter: brightness(1.05);
    }

    main {
      background-color: #f8fafc;
      color: #0f172a;
    }

    section.signup {
      padding: clamp(4rem, 8vw, 6rem) clamp(1.5rem, 6vw, 6rem);
      max-width: 64rem;
      margin: 0 auto;
      display: grid;
      gap: 2rem;
      text-align: center;
    }

    .signup__heading {
      margin: 0;
      font-size: clamp(2.1rem, 4vw, 2.75rem);
      font-weight: 700;
      color: #0f172a;
    }

    .signup__copy {
      margin: 0 auto;
      max-width: 38rem;
      font-size: clamp(1rem, 2vw, 1.15rem);
      line-height: 1.7;
      color: #475569;
    }

    form.signup__form {
      display: grid;
      gap: 0.75rem;
      grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr));
      justify-items: center;
    }

    .signup__input {
      width: 100%;
      padding: 0.9rem 1.1rem;
      border-radius: 999px;
      border: 1px solid #cbd5f5;
      font-size: 1rem;
      font-family: inherit;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    .signup__input:focus-visible {
      outline: none;
      border-color: #10b981;
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.25);
    }

    .signup__button {
      width: 100%;
      padding: 0.9rem 1.1rem;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #10b981, #059669);
      color: #ffffff;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
      box-shadow: 0 15px 25px -15px rgba(15, 118, 110, 0.7);
    }

    .signup__button:hover,
    .signup__button:focus-visible {
      transform: translateY(-1px);
      box-shadow: 0 18px 28px -15px rgba(15, 118, 110, 0.8);
      filter: brightness(1.05);
      outline: none;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    .signup__disclaimer {
      margin: 0;
      font-size: 0.95rem;
      color: #64748b;
    }

    .signup__disclaimer[data-state="success"] {
      color: #047857;
      font-weight: 600;
    }

    .signup__disclaimer[data-state="error"] {
      color: #dc2626;
      font-weight: 600;
    }

    footer {
      padding: 2rem 1.5rem 3rem;
      text-align: center;
      font-size: 0.95rem;
      color: rgba(226, 232, 240, 0.6);
      background-color: #0f172a;
    }

    footer a {
      color: rgba(110, 231, 183, 0.9);
    }

    @media (max-width: 600px) {
      header.hero {
        min-height: 110vh;
      }

      .hero__content {
        text-align: left;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="hero">
      <div class="hero__content">
        <p class="hero__eyebrow">Solar Roots Cooperative</p>
        <h1 class="hero__headline">Turning brownfields into green powerhouses.</h1>
        <p class="hero__copy">Solar Roots is a community-owned movement transforming neglected land into resilient clean energy hubs that generate jobs, revenue, and regenerative impact for every neighbor.</p>
        <a class="hero__cta" href="#signup">Join the Co-op / Get Updates</a>
      </div>
    </header>

    <main>
      <section id="signup" class="signup" aria-labelledby="signup-heading">
        <div>
          <h2 id="signup-heading" class="signup__heading">Stay rooted in the energy transition</h2>
          <p class="signup__copy">Leave your email and we&apos;ll send the latest on project launches, volunteer opportunities, and ways to invest in Solar Roots&apos; community-owned solar farms.</p>
        </div>
        <form class="signup__form" id="signup-form" novalidate>
          <label class="sr-only" for="email-input">Email address</label>
          <input
            class="signup__input"
            id="email-input"
            type="email"
            name="email"
            placeholder="you@example.com"
            autocomplete="email"
            required
          />
          <label class="sr-only" for="password-input">Password</label>
          <input
            class="signup__input"
            id="password-input"
            type="password"
            name="password"
            placeholder="Create a password"
            autocomplete="current-password"
            minlength="6"
            required
          />
          <button class="signup__button" id="signup-submit" type="submit">Save &amp; Sign In</button>
        </form>
        <p class="signup__disclaimer" id="signup-message" role="status" aria-live="polite"></p>
        <p class="signup__disclaimer">We send purposeful updates—no spam, no sharing. Opt out anytime.</p>
      </section>
    </main>

    <footer>
      &copy; <span id="year"></span> Solar Roots Cooperative. Crafted for communities in transition.
    </footer>
  </div>
  <script>
    const yearEl = document.getElementById('year');
    if (yearEl) {
      yearEl.textContent = new Date().getFullYear();
    }

    const signupForm = document.getElementById('signup-form');
    const signupMessage = document.getElementById('signup-message');
    const signupButton = document.getElementById('signup-submit');

    const showMessage = (message, type = 'info') => {
      if (!signupMessage) return;
      signupMessage.textContent = message;
      signupMessage.dataset.state = type;
    };

    const setButtonState = (isLoading) => {
      if (!signupButton) return;
      signupButton.disabled = isLoading;
      signupButton.textContent = isLoading ? 'Working...' : 'Save & Sign In';
    };

    if (signupForm) {
      signupForm.addEventListener('submit', async (event) => {
        event.preventDefault();

        const formData = new FormData(signupForm);
        const email = String(formData.get('email') || '').trim();
        const password = String(formData.get('password') || '');

        if (!email || !password) {
          showMessage('Please provide both an email and password to continue.', 'error');
          return;
        }

        if (password.length < 6) {
          showMessage('Passwords need to be at least 6 characters long.', 'error');
          return;
        }

        try {
          setButtonState(true);
          showMessage('Saving your profile…', 'info');

          const response = await fetch('/api/auth', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email, password }),
          });

          const result = await response.json().catch(() => null);

          if (!response.ok) {
            const message = (result && result.message) || 'Something went wrong. Please try again.';
            showMessage(message, 'error');
            return;
          }

          showMessage(result?.message || 'Profile saved! Welcome aboard.', 'success');
          signupForm.reset();
        } catch (error) {
          showMessage('Unable to reach the server. Please try again shortly.', 'error');
        } finally {
          setButtonState(false);
        }
      });
    }
  </script>
</body>
</html>
